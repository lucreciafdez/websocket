(this.webpackJsonpwebsocket=this.webpackJsonpwebsocket||[]).push([[0],{229:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(51),r=a.n(c),o=(a(60),a(3)),l=a(4),i=a(20),m=a(6),d=a(5),u=(a(61),a(21)),h=(a(62),a(33),a(34),a(128),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getStockValueColor=function(e){return e.current_value<e.history.slice(-2)[0].value?"red":e.current_value>e.history.slice(-2)[0].value?"green":null},e}return Object(l.a)(a,[{key:"render",value:function(){this.props.stock_data.history;return s.a.createElement("tr",{className:this.props.stock_data.is_selected?"selected":null,id:this.props.stock_name,onClick:this.props.toggleStockSelection.bind(this,this.props.stock_name)},s.a.createElement("td",null,this.props.stock_name.toUpperCase()),s.a.createElement("td",{className:"name"},this.props.stock_data.company_name),s.a.createElement("td",{className:"country"},this.props.stock_data.country),s.a.createElement("td",{className:this.getStockValueColor(this.props.stock_data)},this.props.stock_data.current_value.toFixed(2)),s.a.createElement("td",{className:"porcentaje"},this.props.stock_data.porcentaje.toFixed(2)),s.a.createElement("td",{className:"maximo"},this.props.stock_data.maximo.toFixed(2)),s.a.createElement("td",{className:"minimo"},this.props.stock_data.minimo.toFixed(2)),s.a.createElement("td",{className:"volume"},this.props.stock_data.volume))}}]),a}(s.a.Component)),p=function(e){return s.a.createElement("div",{className:"card column",id:"stocks_list"},s.a.createElement("div",{className:"card-header"},s.a.createElement("div",{className:"card-header-title"},"Stocks \xa0 \xa0")),s.a.createElement("div",{className:"card-header-texto"},s.a.createElement("div",{className:"card-header-title-texto"},"A continuacion se muestran los stocks en el mercado, seleccione uno en la tabla para desplegarlo en el gr\xe1fico.")),s.a.createElement("div",{className:"card-content"},e.areStocksLoaded()?s.a.createElement("p",{className:"is-size-7"}):null,s.a.createElement("table",{style:{position:"relative",margin:"auto",width:"50vw"},className:"table is-bordered"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Ticker"),s.a.createElement("th",null,"Nombre Empresa"),s.a.createElement("th",null,"Pais Origen"),s.a.createElement("th",null,"Ultimo precio"),s.a.createElement("th",null,"Variacion Porcentual"),s.a.createElement("th",null,"Alto Historico"),s.a.createElement("th",null,"Bajo Historico"),s.a.createElement("th",null,"Volumen Total Transado"))),s.a.createElement("tbody",null,Object.keys(e.stocks).map((function(t,a){var n=e.stocks[t];return s.a.createElement(h,{key:a,stock_name:t,stock_data:n,toggleStockSelection:e.toggleStockSelection})})),e.areStocksLoaded()?null:s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"4"},"No se han cargado stocks"))))))},k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("tr",null,s.a.createElement("td",{className:"exchange-ticker"},this.props.exchange_data.exchange_ticker),s.a.createElement("td",{className:"name"},this.props.exchange_data.name),s.a.createElement("td",{className:"cantidad"},this.props.exchange_data.cantidad),s.a.createElement("td",{className:"buy"},this.props.exchange_data.buy),s.a.createElement("td",{className:"sell"},this.props.exchange_data.sell),s.a.createElement("td",{className:"volume"},this.props.exchange_data.volume),s.a.createElement("td",{className:"participacion"},this.props.exchange_data.participacion.toFixed(2)))}}]),a}(s.a.Component),g=function(e){return s.a.createElement("div",{className:"card column",id:"exchange_list"},s.a.createElement("div",{className:"card-header"},s.a.createElement("div",{className:"card-header-title"},"Exchanges \xa0 \xa0")),s.a.createElement("div",{className:"card-header-texto"},s.a.createElement("div",{className:"card-header-title-texto"},"A continuacion se muestran los exchanges, mostrando los valores totales hasta el momento.")),s.a.createElement("div",{className:"card-content"},e.areStocksLoaded_exchange()?s.a.createElement("p",{className:"is-size-7"}):null,s.a.createElement("table",{className:"table is-bordered"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Exchange Tiker"),s.a.createElement("th",null,"Nombre"),s.a.createElement("th",null,"Cantidad de Acciones"),s.a.createElement("th",null,"Volumen de Compra"),s.a.createElement("th",null,"Volumen de Venta"),s.a.createElement("th",null,"Volumen Total"),s.a.createElement("th",null,"Participacion de Mercado"))),s.a.createElement("tbody",null,Object.keys(e.exchanges).map((function(t,a){var n=e.exchanges[t];return s.a.createElement(k,{key:a,exchange_name:t,exchange_data:n,toggleStockSelection_exchange:e.toggleStockSelection_exchange})})),e.areStocksLoaded_exchange()?null:s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"4"},"No se han cargado exchanges"))))))},v=a(52),b=(a(223),{responsive:!0,scales:{xAxes:[{type:"time",distribution:"linear",ticks:{source:"auto"},time:{displayFormats:{second:"h:mm:ss a"},unit:"second"},scaleLabel:{display:!0,labelString:"Tiempo"}}],yAxes:[{ticks:{beginAtZero:!0,stepValue:10,steps:10},scaleLabel:{display:!0,labelString:"Valor"}}]},pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,drag:!1,mode:"x"}}),E=["#ba55d3","#9acd32","#40e0d0","#6495ed","#f08080","#ffa500","#663399","#b22222","#5f9ea0","#8b008b","#8b4513","#f4a460","#2e8b57","#dda0dd","rgb(0, 150, 136)","rgb(255, 193, 7)","rgb(96, 125, 139)","rgb(33, 33, 33)","rgb(169, 4, 4)","rgb(1, 74, 64)","rgb(179, 3, 72)","rgb(84, 58, 68)"],f=function(e,t,a){return{label:e.toUpperCase(),fill:!1,lineTension:0,backgroundColor:t,borderColor:t,borderCapStyle:"butt",borderJoinStyle:"miter",pointBorderColor:t,pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:t,pointHoverBorderColor:t,pointHoverBorderWidth:2,pointRadius:3,pointHitRadius:10,data:a}},x=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).updateChart=function(){var t=e.refs.chart.chartInstance;if(0===Object.keys(e.props.stocks).length)return t.data.datasets=[],t.update();Object.keys(e.props.stocks).map((function(a,n){var s=e.props.stocks[a],c=t.data.datasets.find((function(e){return e.label===a.toUpperCase()}));if(s.is_selected){var r=e.props.stocks[a];c?c.data=e.getStockValues(r):r&&(t.data.datasets=t.data.datasets.concat([f(a,E[n],e.getStockValues(r))]))}else c&&t.data.datasets.splice(t.data.datasets.indexOf(c),1);t.update()}))},e.componentDidUpdate=function(){e.updateChart()},e.getStockValues=function(e){return e.history.map((function(e){return{t:new Date(e.time),y:e.value}}))},e.resetZoom=function(){e.refs.chart.chartInstance.resetZoom()},e}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"card column"},s.a.createElement("div",{className:"card-header"},s.a.createElement("div",{className:"card-header-title"},"Gr\xe1fico Stocks")),s.a.createElement("div",{className:"card-header-texto"},s.a.createElement("div",{className:"card-header-title-texto"},"Puede hacer zoom al gr\xe1fico y resetearlo con el bot\xf3n a continuaci\xf3n"),s.a.createElement("button",{className:"boton-r is-small ",onClick:this.resetZoom},"REINICIAR ZOOM")),s.a.createElement("div",{className:"card-content"},s.a.createElement(v.a,{data:{datasets:[]},options:b,ref:"chart"})))}}]),a}(s.a.Component),S=a(54),_=a.n(S),y="wss://le-18262636.bitzonte.com",N=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={stocks:{},def_stocks:{},exchanges:{},market_trend:void 0,connectionError:!1,response:!1,response2:!1,response3:!1},e.componentDidMount=function(){var t=_()(y,{path:"/stocks"});t.emit("EXCHANGES",(function(e){})),t.on("EXCHANGES",(function(t){e.exchange(t)})),t.on("UPDATE",(function(t){return e.setState({response:t})})),t.on("UPDATE",e.saveNewStockValues),t.on("BUY",(function(t){return e.setState({response2:t})})),t.on("BUY",e.buyStocks),t.on("SELL",(function(t){return e.setState({response3:t})})),t.on("SELL",e.sellStocks),t.emit("STOCKS",(function(e){})),t.on("STOCKS",(function(t){e.stocksTotal(t)}))},e.exchange=function(t){for(var a=0,n=Object.keys(t);a<n.length;a++){var s=n[a];e.state.exchanges[s]?(e.state.exchanges[s].exchange_ticker=t[s].exchange_ticker,e.state.exchanges[s].name=t[s].name,e.state.exchanges[s].listed_companies=t[s].listed_companies,e.state.exchanges[s].cantidad=Object(t[s].listed_companies).length):e.state.exchanges[s]={name:t[s].name,exchange_ticker:t[s].exchange_ticker,listed_companies:t[s].listed_companies,cantidad:Object(t[s].listed_companies).length,buy:0,volume:0,sell:0,participacion:0}}e.setState({exchanges:e.state.exchanges})},e.stocksTotal=function(t){var a,n=Object(u.a)(Object(t));try{for(n.s();!(a=n.n()).done;){var s=a.value;e.state.def_stocks[s.ticker]={company_name:s.company_name,country:s.country}}}catch(c){n.e(c)}finally{n.f()}e.setState({def_stocks:e.state.def_stocks})},e.sellStocks=function(t){e.props.hideSpinner();e.state.response3;var a=e.state.response3,n=e.state.stocks;e.state.stocks[a.ticker]&&(n[a.ticker].volume+=a.volume,n[a.ticker].sell+=a.volume,e.setState({stocks:n}));for(var s=0,c=0,r=Object.keys(e.state.exchanges);c<r.length;c++){var o=r[c];s+=e.state.exchanges[o].volume}for(var l=0,i=Object.keys(e.state.def_stocks);l<i.length;l++)for(var m=i[l],d=0,h=Object.keys(e.state.exchanges);d<h.length;d++){var p,k=h[d],g=Object(u.a)(Object(e.state.exchanges[k].listed_companies));try{for(g.s();!(p=g.n()).done;){var v=p.value;e.state.def_stocks[m].company_name==v&&(e.state.exchanges[k].sell+=a.volume,e.state.exchanges[k].volume+=a.volume,e.state.exchanges[k].participacion=e.state.exchanges[k].volume/s)}}catch(b){g.e(b)}finally{g.f()}}e.setState({exchanges:e.state.exchanges})},e.buyStocks=function(t){e.props.hideSpinner();e.state.response2;var a=e.state.response2,n=e.state.stocks;e.state.stocks[a.ticker]&&(n[a.ticker].volume+=a.volume,n[a.ticker].buy+=a.volume,e.setState({stocks:n}));for(var s=0,c=0,r=Object.keys(e.state.exchanges);c<r.length;c++){var o=r[c];s+=e.state.exchanges[o].volume}for(var l=0,i=Object.keys(e.state.def_stocks);l<i.length;l++)for(var m=i[l],d=0,h=Object.keys(e.state.exchanges);d<h.length;d++){var p,k=h[d],g=Object(u.a)(Object(e.state.exchanges[k].listed_companies));try{for(g.s();!(p=g.n()).done;){var v=p.value;e.state.def_stocks[m].company_name==v&&(e.state.exchanges[k].buy+=a.volume,e.state.exchanges[k].volume+=a.volume,e.state.exchanges[k].participacion=e.state.exchanges[k].volume/s)}}catch(b){g.e(b)}finally{g.f()}}e.setState({exchanges:e.state.exchanges})},e.saveNewStockValues=function(t){e.props.hideSpinner();e.state.response;var a=e.state.response,n=0,s=0,c=e.state.stocks;e.state.stocks[a.ticker]?(c[a.ticker].current_value>Number(a.value)?n++:s++,c[a.ticker].porcentaje=(Number(a.value)-c[a.ticker].current_value)/c[a.ticker].current_value*100,c[a.ticker].current_value=Number(a.value),c[a.ticker].maximo<Number(a.value)&&(c[a.ticker].maximo=Number(a.value)),c[a.ticker].minimo>Number(a.value)&&(c[a.ticker].minimo=Number(a.value)),c[a.ticker].history.push({time:a.time,value:Number(a.value)})):c[a.ticker]={ticker:a.ticker,current_value:a.value,history:[{time:a.time,value:Number(a.value)}],porcentaje:(Number(a.value)-a.current_value)/a.current_value*100,maximo:a.value,minimo:a.value,volume:0,sell:0,buy:0,company_name:"",country:"",is_selected:!1};for(var r=0,o=Object.keys(e.state.def_stocks);r<o.length;r++){var l=o[r];(l=a.ticker)&&(c[a.ticker].company_name=e.state.def_stocks[l].company_name,c[a.ticker].country=e.state.def_stocks[l].country)}e.setState({stocks:c,market_trend:e.newMarketTrend(n,s)})},e.newMarketTrend=function(e,t){if(e!==t)return e>t?"up":"down"},e.toggleStockSelection=function(t){var a=e.state.stocks;a[t].is_selected=!a[t].is_selected,e.setState({stocks:a})},e.resetData=function(){var t=e.state.stocks;Object.keys(e.state.stocks).map((function(e,a){t[e].history=[t[e].history.pop()]})),e.setState({stocks:t})},e.areStocksLoaded=function(){return Object.keys(e.state.stocks).length>0},e.toggleStockSelection_exchange=function(t){var a=e.state.exchanges;a[t].is_selected=!a[t].is_selected,e.setState({exchanges:a})},e.resetData_exchange=function(){var t=e.state.exchanges;e.setState({exchanges:t})},e.areStocksLoaded_exchange=function(){return Object.keys(e.state.exchanges).length>0},e}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"rows"},s.a.createElement("div",{className:"columns"},s.a.createElement(p,{stocks:this.state.stocks,toggleStockSelection:this.toggleStockSelection,resetData:this.resetData,market_trend:this.state.market_trend,areStocksLoaded:this.areStocksLoaded}),s.a.createElement(x,{stocks:this.state.stocks})),s.a.createElement(g,{exchanges:this.state.exchanges,toggleStockSelection_exchange:this.toggleStockSelection_exchange,resetData_exchange:this.resetData_exchange,areStocksLoaded_exchange:this.areStocksLoaded_exchange})),s.a.createElement("div",{className:this.props.showSpinner?"modal is-active":"modal"},s.a.createElement("div",{className:"modal-background"})))}}]),a}(s.a.Component),O=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={hasError:!1,showSpinner:!0,i:0},e.hideSpinner=function(){e.setState({showSpinner:!1})},e.handleClick=e.handleClick.bind(Object(i.a)(e)),e.i=0,e}return Object(l.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"handleClick",value:function(){this.setState((function(e){return{isToggleOn:!e.isToggleOn}}))}},{key:"render",value:function(){return 0===this.i?(this.handleClick(),this.i+=1,s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"card-header-bienv"},s.a.createElement("div",{className:"card-header-title-bienv"},"Bienvenido a Stocks y Exchange")),s.a.createElement("button",{className:"boton",onClick:this.handleClick},this.state.isToggleOn?"DESCONECTAR":"CONECTAR"),s.a.createElement(N,{hideSpinner:this.hideSpinner,showSpinner:this.state.showSpinner})))):this.state.isToggleOn?s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"card-header-bienv"},s.a.createElement("div",{className:"card-header-title-bienv"},"Bienvenido a Stocks y Exchange")),s.a.createElement("button",{className:"boton",onClick:this.handleClick},this.state.isToggleOn?"DESCONECTAR":"CONECTAR"),s.a.createElement(N,{hideSpinner:this.hideSpinner,showSpinner:this.state.showSpinner}))):s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("p",null,"Debe conectarse al socket"),s.a.createElement("button",{className:"boton",onClick:this.handleClick},this.state.isToggleOn?"DESCONECTAR":"CONECTAR"))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,t,a){e.exports=a(229)},60:function(e,t,a){},61:function(e,t,a){}},[[55,1,2]]]);
//# sourceMappingURL=main.73710203.chunk.js.map